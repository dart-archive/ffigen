os: osx
language: dart
dart:
- dev
# Only building master means that we don't run two builds for each pull request.
dart_task:
- test: --platform vm
- dartanalyzer
- dartfmt
branches:
  only: [master]
cache:
  directories:
    - $HOME/.pub-cache
before_install:
  - export HOMEBREW_NO_INSTALL_CLEANUP=1
  - brew install llvm
before_script:
  - 'pub run ffigen:setup'
  - cd test/native_test && dart build_test_dylib.dart && cd ../..
