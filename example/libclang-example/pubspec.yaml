name: example_ffi_generation
description: A simple command-line application.
# version: 1.0.0
# homepage: https://www.example.com

environment:
  sdk: '>=2.8.1 <3.0.0'

dev_dependencies:
  ffigen: 
    path: '../../'

ffigen:
  output: 'gen.dart'
  libclang-dylib: '../../tool/wrapped_libclang/libwrapped_clang.so'
  
  # globs are supported, and only .h files are parsed (.c temporarily)
  headers:
    - '/home/prerak/repos/ffigen/tool/wrapped_libclang/*.c'
  
  # excludes included headers based on their names (not fullpath name)
  header-filter:
    include:
      - 'wrapper.c'
      - 'CXString.h'
      - 'Index.h'
  
  compiler-opts: '-I/usr/lib/llvm-9/include/ -I/usr/lib/llvm-10/include/'
  filters:
    functions:
      include:
        matches:
        # should be valid regexp
          - 'clang_.*'
        names:
        # should match exact function name
          # - 'clang_executeOnThread'
      # exclude:
        # matches:
        # # should be valid regexp
          # - '.*CursorKind.*'
        # names:
        # # should match exact function name
          # - 'clang_visitChildren_wrap'
    structs:
      include:
          matches:
            - 'CX.*'
          names:
        # should match exact struct name
            - 'IndexerCallbacks'
    enums:
      include:
        names:
          - 'CXTypeKind'
          - 'CXGlobalOptFlags'
